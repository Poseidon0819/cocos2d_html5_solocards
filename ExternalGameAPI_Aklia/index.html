<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Solo Cards</title>

  <meta name="viewport"
    content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1" />

  <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- force webkit on 360 -->
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <!-- force edge on IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="msapplication-tap-highlight" content="no">

  <!-- force full screen on some browser -->
  <meta name="full-screen" content="yes" />
  <meta name="x5-fullscreen" content="true" />
  <meta name="360-fullscreen" content="true" />

  <!-- force screen orientation on some browser -->
  <!-- <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-orientation" content="portrait"> -->

  <meta name="browsermode" content="application">
  <meta name="x5-page-mode" content="app">

  <style type="text/css">
    html {
      -ms-touch-action: none;
    }

    body,
    canvas,
    div {
      margin: 0;
      padding: 0;
      outline: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      -khtml-user-select: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    body {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      padding: 0;
      border: 0;
      margin: 0;

      cursor: default;
      color: #888;
      background-color: #333;

      text-align: center;
      font-family: Helvetica, Verdana, Arial, sans-serif;

      display: flex;
      flex-direction: column;
    }

    #Cocos2dGameContainer {
      position: absolute;
      margin: 0;
      overflow: hidden;
      left: 0px;
      top: 0px;

      display: -webkit-box;
      -webkit-box-orient: horizontal;
      -webkit-box-align: center;
      -webkit-box-pack: center;
    }

    canvas {
      background-color: rgba(0, 0, 0, 0);
    }
  </style>
</head>

<body>

  <!--GAME EXTERNAL API TEST BEGINS -->
  <p>
    GAME EXTERNAL API TEST, PLEASE REMOVE THIS CODE IN PRODUCTION(located in index.html) <br>
    PLEASE OPEN BROWSER DEVELOPER LOG FOR TESTS OUTPUT<br>(PROPAGATION TEST, GAME LOADED CALLBACK etc...)<br>
    Press 'q' for French language.(external callback)<br>
    Press 'w' for English language.(external callback)<br>
    Press 'e' to enable sound.(external callback)<br>
    Press 'r' to disable sound.(external callback)
  </p>
  <p></p>


  <script>
    document.addEventListener('keydown', function (event) {
      const keyName = (event.key === undefined) ? String.fromCharCode(event.keyCode).toLowerCase() : event.key.toLowerCase();
      console.log("Propagation test : Key pressed " + keyName);
      if (keyName == "q") {
        ExternalGameAPI.setLanguage("fr");
      } else if (keyName == "w") {
        ExternalGameAPI.setLanguage("en");
      } else if (keyName == "e") {
        ExternalGameAPI.setMute(false);
      } else if (keyName == "r") {
        ExternalGameAPI.setMute(true);
      }
    }, false);

    document.addEventListener('mousedown', function (event) {
      console.log("Propagation test : mouse down")
    }, false);
    document.addEventListener('mouseup', function (event) {
      console.log("Propagation test : mouse up")
    }, false);
    document.addEventListener('mousemove', function (event) {
      //console.log("Propagation test : mouse move")
    }, false);
    document.addEventListener('mousewheel', function (event) {
      console.log("Propagation test : mouse wheel")
    }, false);

    function enhs_external_keycode_translate(KeyboardEventWitch) { //simulation
      var txt = "customStringSentToGame ";
      if (false) { //standard browser key codes
        console.log("Listening test for standard browser scancodes... (switch to ORSAY TV remote scancodes in index.html)");
        switch (KeyboardEventWitch) {
          case 49://this value hardware dependent, cocos defaults, for tests in usual browser
            console.log(txt + "KEY_1");
            return "KEY_1";
          case 50:
            console.log(txt + "KEY_2");
            return "KEY_2";
          case 51:
            console.log(txt + "KEY_3");
            return "KEY_3";
          case 52:
            console.log(txt + "KEY_4");
            return "KEY_4";
          case 53:
            console.log(txt + "KEY_5");
            return "KEY_5";
          case 54:
            console.log(txt + "KEY_6");
            return "KEY_6";
          case 55:
            console.log(txt + "KEY_7");
            return "KEY_7";
          case 56:
            console.log(txt + "KEY_8");
            return "KEY_8";
          case 57:
            console.log(txt + "KEY_9");
            return "KEY_9";
          case 48:
            console.log(txt + "KEY_0");
            return "KEY_0";
          case 38:
            console.log(txt + "KEY_UP");
            return "KEY_UP";
          case 40:
            console.log(txt + "KEY_DOWN");
            return "KEY_DOWN";
          case 37:
            console.log(txt + "KEY_LEFT");
            return "KEY_LEFT";
          case 39:
            console.log(txt + "KEY_RIGHT");
            return "KEY_RIGHT";
          case 13:
            console.log(txt + "KEY_ENTER");
            return "KEY_ENTER";
        }
      } else { //orsay tv remote key codes
        console.log("Listening test for ORSAY TV remote scancodes...(switch to browser scancodes in index.html)");
        switch (KeyboardEventWitch) {
          case 101: //orsay tv remote keycode
            console.log(txt + "KEY_1");
            return "KEY_1";
          case 98:
            console.log(txt + "KEY_2");
            return "KEY_2";
          case 6:
            console.log(txt + "KEY_3");
            return "KEY_3";
          case 8:
            console.log(txt + "KEY_4");
            return "KEY_4";
          case 9:
            console.log(txt + "KEY_5");
            return "KEY_5";
          case 10:
            console.log(txt + "KEY_6");
            return "KEY_6";
          case 12:
            console.log(txt + "KEY_7");
            return "KEY_7";
          case 13:
            console.log(txt + "KEY_8");
            return "KEY_8";
          case 14:
            console.log(txt + "KEY_9");
            return "KEY_9";
          case 17:
            console.log(txt + "KEY_0");
            return "KEY_0";
          case 29460:
            console.log(txt + "KEY_UP");
            return "KEY_UP";
          case 29461:
            console.log(txt + "KEY_DOWN");
            return "KEY_DOWN";
          case 4:
            console.log(txt + "KEY_LEFT");
            return "KEY_LEFT";
          case 5:
            console.log(txt + "KEY_RIGHT");
            return "KEY_RIGHT";
          case 29443:
            console.log(txt + "KEY_ENTER");
            return "KEY_ENTER";
        }
      }
      return "UNDEFINED";
    }
    var ExternalGameAPI_callbackGameExit = function () { //function will be called on game exit, please redefine it elswhere with your code
      console.log("Callback game exit");
    };

    var ExternalGameAPI_callbackGameStart = function () { //function will be called on game startup, please redefine it elswhere with your code
      console.log("Callback game loaded");
    };

    //location (directory with closing '/' ) of game.min.js,project.json and "res" folder, related to location of this index.html, example: "games/solocards/"
    // script path should be modified as well, example: script cocos src= "games/solocards/game.min.js"
    var ExternalGameAPI_path = "";


  </script>
  <!--GAME EXTERNAL API TEST ENDS -->

  <canvas id="gameCanvas" width="480" height="720"></canvas>
  <script src="frameworks/cocos2d-html5/CCBoot.js"></script>
  <script cocos src="main.js"></script>
</body>

</html>